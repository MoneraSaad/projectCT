{"ast":null,"code":"import _slicedToArray from\"C:/Users/User/git/testGit/projectCT/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from'react';import{useState}from'react';import\"./AccompanyingPersonTrack.css\";import{Button,Container,Navbar,Nav}from'react-bootstrap';import{useHistory}from\"react-router-dom\";var driverInformation={userID:\"\",userName:\"\",userLastName:\"\",city:\"\",userEmail:\"\",phoneNumber:\"\",userRole:\"\"};function AccompanyingPersonTrack(){var history=useHistory();var AccompanyingPerson=localStorage.getItem(\"userID\");var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),Driverlat=_useState2[0],setDriverlat=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),Driverlong=_useState4[0],setDriverlong=_useState4[1];function handleStart(){driverInformation={userID:\"4325\",userName:\"\",userLastName:\"\",city:\"\",userEmail:\"\",phoneNumber:\"\",userRole:\"Driver\"};fetch('/api/Driver/driverLocation',{method:\"POST\",body:JSON.stringify({driverInformation:driverInformation}),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(data){if(data.array!=null){if(data.array.length>0){setDriverlat(data.array[0].lat);setDriverlong(data.array[1].long);window.open(\"https://maps.google.com?q=\"+Driverlat+\",\"+Driverlong);}}else{alert(\"couldn't track!\");}});}function handleSettings(){history.replace(\"/SettingsPageAccompanyingPerson\");}function handleHomePage(){history.replace(\"/AccompanyingPersonPage\");}function handleLogOut(){var userID=AccompanyingPerson;//fetch to logout user \nfetch('/api/users/logout',{method:\"POST\",body:JSON.stringify({userID:userID}),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(data){if(data.success){localStorage.clear();history.replace('/LogIn');}else{alert(\"can't log out\");}});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Container,{style:{border:\"solid #ffa500\",borderColor:\"#ffa500\",textAlign:\"center\",background:\"url('\".concat(process.env.PUBLIC_URL,\"/l.png')\")},children:[/*#__PURE__*/_jsx(Navbar,{className:\"mb-3\",\"aria-label\":\"Toolbar with Button groups\",children:/*#__PURE__*/_jsxs(Nav,{className:\"mr-auto\",children:[/*#__PURE__*/_jsx(Nav.Link,{href:\"#home\",onClick:handleHomePage,children:\"Home\"}),/*#__PURE__*/_jsx(Nav.Link,{href:\"#Settings\",onClick:handleSettings,children:\"Settings\"}),/*#__PURE__*/_jsx(Nav.Link,{href:\"#LogOut\",onClick:handleLogOut,children:\"Log Out\"})]})}),/*#__PURE__*/_jsx(\"h4\",{style:{fontWeight:\"bold\",color:\"#ffa500\",fontSize:\"40px\",fontFamily:\"Times New Roman\"},children:\"Vehicle Track\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"meta\",{name:\"viewport\",content:\"width=device-width, initial-scale=1.0\"}),/*#__PURE__*/_jsx(\"b\",{children:/*#__PURE__*/_jsx(Button,{variant:\"warning\",size:\"lg\",onClick:handleStart,children:\"View Map\"})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]})});}export default AccompanyingPersonTrack;","map":{"version":3,"sources":["C:/Users/User/git/testGit/projectCT/client/src/view/components/pages/AccompanyingPersonTrack/AccompanyingPersonTrack.jsx"],"names":["React","useState","Button","Container","Navbar","Nav","useHistory","driverInformation","userID","userName","userLastName","city","userEmail","phoneNumber","userRole","AccompanyingPersonTrack","history","AccompanyingPerson","localStorage","getItem","Driverlat","setDriverlat","Driverlong","setDriverlong","handleStart","fetch","method","body","JSON","stringify","headers","then","res","json","data","array","length","lat","long","window","open","alert","handleSettings","replace","handleHomePage","handleLogOut","success","clear","border","borderColor","textAlign","background","process","env","PUBLIC_URL","fontWeight","color","fontSize","fontFamily"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { useState} from 'react';\r\nimport \"./AccompanyingPersonTrack.css\";\r\nimport { Button, Container,Navbar,Nav} from 'react-bootstrap';\r\nimport { useHistory } from \"react-router-dom\";\r\nlet driverInformation = {\r\n    userID: \"\",\r\n    userName: \"\",\r\n    userLastName: \"\",\r\n    city: \"\",\r\n    userEmail: \"\",\r\n    phoneNumber: \"\",\r\n    userRole: \"\"\r\n};\r\n\r\n\r\nfunction AccompanyingPersonTrack() {\r\n\r\n    let history = useHistory();\r\n    let AccompanyingPerson = localStorage.getItem(\"userID\");\r\n    const [Driverlat, setDriverlat] = useState(\"\");\r\n    const [Driverlong, setDriverlong] = useState(\"\");\r\n\r\n    function handleStart() {\r\n\r\n\r\n        driverInformation = {\r\n            userID: \"4325\",\r\n            userName: \"\",\r\n            userLastName: \"\",\r\n            city: \"\",\r\n            userEmail: \"\",\r\n            phoneNumber: \"\",\r\n            userRole: \"Driver\"\r\n        };\r\n\r\n        fetch('/api/Driver/driverLocation', {\r\n            method: \"POST\",\r\n            body: JSON.stringify({ driverInformation }),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n        })\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n\r\n                if (data.array != null) {\r\n                    if (data.array.length > 0) {\r\n    \r\n                        setDriverlat(data.array[0].lat);\r\n                        setDriverlong(data.array[1].long);\r\n                        window.open(\"https://maps.google.com?q=\" + Driverlat + \",\" + Driverlong);\r\n                    }\r\n                } else {\r\n                    alert(\"couldn't track!\");\r\n                }\r\n\r\n            });\r\n    }\r\n\r\n    function handleSettings(){\r\n        history.replace(\"/SettingsPageAccompanyingPerson\");\r\n    }\r\n\r\n    function handleHomePage(){\r\n        history.replace(\"/AccompanyingPersonPage\");\r\n      }\r\n\r\n      function handleLogOut() {\r\n     \r\n        const userID = AccompanyingPerson;\r\n      \r\n        //fetch to logout user \r\n        fetch('/api/users/logout', {\r\n            method: \"POST\",\r\n            body: JSON.stringify({ userID }),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n        })\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n                if (data.success) {\r\n                    localStorage.clear();\r\n                    history.replace('/LogIn');\r\n                }\r\n                else {\r\n      \r\n                    alert(\"can't log out\");\r\n                }\r\n            });\r\n      }\r\n\r\n    return (\r\n        <div>\r\n        <Container style={{ border: \"solid #ffa500\", borderColor: \"#ffa500\",textAlign: \"center\", background: `url('${process.env.PUBLIC_URL}/l.png')` }}>\r\n        <Navbar className=\"mb-3\" aria-label=\"Toolbar with Button groups\">\r\n            <Nav className=\"mr-auto\">\r\n                <Nav.Link href=\"#home\" onClick={handleHomePage}>Home</Nav.Link>\r\n                <Nav.Link href=\"#Settings\" onClick={handleSettings}>Settings</Nav.Link>\r\n                <Nav.Link href=\"#LogOut\" onClick={handleLogOut}>Log Out</Nav.Link>\r\n            </Nav>\r\n        </Navbar>\r\n        <h4 style={{ fontWeight: \"bold\", color: \"#ffa500\", fontSize: \"40px\", fontFamily: \"Times New Roman\" }}>Vehicle Track</h4><br></br>\r\n \r\n            <form>\r\n                <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"></meta>\r\n                <b>\r\n                <Button variant=\"warning\" size=\"lg\"  onClick={handleStart}>View Map</Button>\r\n                </b>\r\n            </form>\r\n\r\n        <br></br>\r\n        <br></br>\r\n        </Container>\r\n        </div>\r\n\r\n\r\n\r\n\r\n    )\r\n\r\n}\r\n\r\nexport default AccompanyingPersonTrack; "]},"metadata":{},"sourceType":"module"}