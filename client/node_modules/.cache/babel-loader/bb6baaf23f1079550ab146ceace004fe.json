{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from'react';import{useState}from'react';import\"./DriverPage.css\";import{Button,Container,Navbar,Nav}from'react-bootstrap';import{useHistory}from\"react-router-dom\";var driverInformation={userID:\"\",userName:\"\",userLastName:\"\",city:\"\",userEmail:\"\",phoneNumber:\"\",userRole:\"\"};function DriverPage(){var history=useHistory();var driverID=localStorage.getItem(\"userID\");function handleDriverAttendanceBtn(){history.replace(\"/DriverAttendancePage\");}function handleWhatsapp(){var VehicleCompanyManager;fetch('/api/Driver/drivertest',{method:\"POST\",body:JSON.stringify({driverID:driverID}),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(data){if(data.success){VehicleCompanyManager=data.info[0].userInfo.phoneNumber;window.open(\"https://api.whatsapp.com/send?phone=+972\"+VehicleCompanyManager+\"&text=&source=&data=\");}else{alert(\"couldn't get vehicle company manager phone number\");}});}function handleDriverLocation(){driverInformation={userID:\"4325\",userName:\"\",userLastName:\"\",city:\"\",userEmail:\"\",phoneNumber:\"\",userRole:\"Driver\"};if(navigator.geolocation){navigator.geolocation.getCurrentPosition(getPosition);}function getPosition(position){var lat=position.coords.latitude;var long=position.coords.longitude;var userID=driverInformation.userID;fetch('/api/Driver/driverShareLocation',{method:\"POST\",body:JSON.stringify({lat:lat,long:long,userID:userID}),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(data){if(data.success){console.log(data);}else{alert(\"Try Again..\");}});}}function handleSettings(){history.replace(\"/SettingsPageUsers\");}function handleHome(){history.replace(\"/DriverPage\");}function handleLogOut(){var userID=driverID;//fetch to logout user \nfetch('/api/users/logout',{method:\"POST\",body:JSON.stringify({userID:userID}),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(data){if(data.success){localStorage.clear();history.replace('/LogIn');}else{alert(\"can't log out\");}});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Container,{style:{border:\"solid #ffa500\",borderColor:\"#ffa500\",textAlign:\"center\",background:\"url('\".concat(process.env.PUBLIC_URL,\"/l.png')\")},children:[/*#__PURE__*/_jsx(Navbar,{className:\"mb-3\",\"aria-label\":\"Toolbar with Button groups\",children:/*#__PURE__*/_jsxs(Nav,{className:\"mr-auto\",children:[/*#__PURE__*/_jsx(Nav.Link,{href:\"#home\",onClick:handleHome,children:\"Home\"}),/*#__PURE__*/_jsx(Nav.Link,{href:\"#Settings\",onClick:handleSettings,children:\"Settings\"}),/*#__PURE__*/_jsx(Nav.Link,{href:\"#LogOut\",onClick:handleLogOut,children:\"Log Out\"})]})}),/*#__PURE__*/_jsx(\"h4\",{style:{fontWeight:\"bold\",color:\"#ffa500\",fontSize:\"40px\",fontFamily:\"Times New Roman\"},children:\"Welcome Driver\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{variant:\"dark\",size:\"lg\",type:\"button\",onClick:handleDriverAttendanceBtn,children:\"Attendance\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{variant:\"dark\",size:\"lg\",type:\"button\",children:\"Navigate\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{variant:\"dark\",size:\"lg\",type:\"button\",onClick:handleDriverLocation,children:\"Start Route\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{variant:\"dark\",size:\"lg\",type:\"button\",onClick:handleWhatsapp,children:\"Contact Vehicle Company Manager\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]})});}export default DriverPage;","map":{"version":3,"sources":["C:/Users/User/git/testGit/projectCT/client/src/view/components/pages/DriverPage/DriverPage.jsx"],"names":["React","useState","Button","Container","Navbar","Nav","useHistory","driverInformation","userID","userName","userLastName","city","userEmail","phoneNumber","userRole","DriverPage","history","driverID","localStorage","getItem","handleDriverAttendanceBtn","replace","handleWhatsapp","VehicleCompanyManager","fetch","method","body","JSON","stringify","headers","then","res","json","data","success","info","userInfo","window","open","alert","handleDriverLocation","navigator","geolocation","getCurrentPosition","getPosition","position","lat","coords","latitude","long","longitude","console","log","handleSettings","handleHome","handleLogOut","clear","border","borderColor","textAlign","background","process","env","PUBLIC_URL","fontWeight","color","fontSize","fontFamily"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { useState } from 'react';\r\nimport \"./DriverPage.css\";\r\nimport { Button, Container,Navbar,Nav } from 'react-bootstrap';\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nlet driverInformation = {\r\n    userID: \"\",\r\n    userName: \"\",\r\n    userLastName: \"\",\r\n    city: \"\",\r\n    userEmail: \"\",\r\n    phoneNumber: \"\",\r\n    userRole: \"\"\r\n};\r\n\r\nfunction DriverPage() {\r\n    const history = useHistory();\r\n    let driverID = localStorage.getItem(\"userID\");\r\n    function handleDriverAttendanceBtn() {\r\n        history.replace(\"/DriverAttendancePage\");\r\n\r\n    }\r\n\r\n    function handleWhatsapp() {\r\n        let VehicleCompanyManager;\r\n        fetch('/api/Driver/drivertest', {\r\n            method: \"POST\",\r\n            body: JSON.stringify({ driverID }),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n        })\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n                if (data.success) {\r\n                        VehicleCompanyManager = data.info[0].userInfo.phoneNumber;\r\n                        window.open(\"https://api.whatsapp.com/send?phone=+972\" + VehicleCompanyManager + \"&text=&source=&data=\");\r\n\r\n\r\n                    \r\n                }else{\r\n                    alert(\"couldn't get vehicle company manager phone number\");\r\n                }\r\n\r\n            });\r\n\r\n\r\n    }\r\n\r\n    function handleDriverLocation() {\r\n\r\n        driverInformation = {\r\n            userID: \"4325\",\r\n            userName: \"\",\r\n            userLastName: \"\",\r\n            city: \"\",\r\n            userEmail: \"\",\r\n            phoneNumber: \"\",\r\n            userRole: \"Driver\"\r\n        };\r\n\r\n        if (navigator.geolocation) {\r\n            navigator.geolocation.getCurrentPosition(getPosition);\r\n        }\r\n        function getPosition(position) {\r\n            let lat = position.coords.latitude;\r\n            let long = position.coords.longitude;\r\n            let userID = driverInformation.userID;\r\n\r\n            fetch('/api/Driver/driverShareLocation', {\r\n                method: \"POST\",\r\n                body: JSON.stringify({ lat, long, userID }),\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n            })\r\n                .then((res) => res.json())\r\n                .then((data) => {\r\n\r\n                    if (data.success) {\r\n\r\n                        console.log(data);\r\n\r\n\r\n                    }\r\n                    else {\r\n                        alert(\"Try Again..\")\r\n                    }\r\n\r\n\r\n\r\n\r\n                });\r\n        }\r\n    }\r\n\r\n    function handleSettings(){\r\n        history.replace(\"/SettingsPageUsers\");\r\n    }\r\n\r\n    function handleHome(){\r\n        history.replace(\"/DriverPage\");\r\n    }\r\n    \r\n    function handleLogOut() {\r\n     \r\n        const userID = driverID;\r\n      \r\n        //fetch to logout user \r\n        fetch('/api/users/logout', {\r\n            method: \"POST\",\r\n            body: JSON.stringify({ userID }),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n        })\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n                if (data.success) {\r\n                    localStorage.clear();\r\n                    history.replace('/LogIn');\r\n                }\r\n                else {\r\n      \r\n                    alert(\"can't log out\");\r\n                }\r\n            });\r\n      }\r\n\r\n    return (\r\n        <div >\r\n            <Container style={{ border: \"solid #ffa500\", borderColor: \"#ffa500\", textAlign: \"center\", background: `url('${process.env.PUBLIC_URL}/l.png')` }}>\r\n                <Navbar className=\"mb-3\" aria-label=\"Toolbar with Button groups\">\r\n                    <Nav className=\"mr-auto\">\r\n                        <Nav.Link href=\"#home\" onClick={handleHome}>Home</Nav.Link>\r\n                        <Nav.Link href=\"#Settings\" onClick={handleSettings}>Settings</Nav.Link>\r\n                        <Nav.Link href=\"#LogOut\" onClick={handleLogOut}>Log Out</Nav.Link>\r\n                    </Nav>\r\n                </Navbar>\r\n                <h4 style={{ fontWeight: \"bold\", color: \"#ffa500\", fontSize: \"40px\", fontFamily: \"Times New Roman\" }}>Welcome Driver</h4><br></br>\r\n\r\n                <Button variant=\"dark\" size=\"lg\" type=\"button\" onClick={handleDriverAttendanceBtn}>Attendance</Button>\r\n                <br></br>\r\n                <br></br>\r\n                <Button variant=\"dark\" size=\"lg\" type=\"button\">Navigate</Button>\r\n                <br></br>\r\n                <br></br>\r\n                <Button variant=\"dark\" size=\"lg\" type=\"button\" onClick={handleDriverLocation}>Start Route</Button>\r\n                <br></br>\r\n                <br></br>\r\n                <Button variant=\"dark\" size=\"lg\" type=\"button\" onClick={handleWhatsapp}>Contact Vehicle Company Manager</Button>\r\n                <br></br>\r\n                <br></br>\r\n            </Container>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DriverPage;"]},"metadata":{},"sourceType":"module"}